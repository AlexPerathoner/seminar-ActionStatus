#!/bin/bash

# -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
#  Created by Sam Deane on 25/03/2020.
#  All code (c) 2020 - present day, Elegant Chaos Limited.
# -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


set -e
rm -rf .build
source make-tools

echo "***************"
echo "Preparing macOS"
echo "***************"

rt set scheme ActionStatus-macOS --platform macOS
rt archive --show-output 2> /dev/null | xcpretty
rt export
rt notarize
rt wait
rt compress
rt appcast --show-output | xcpretty
